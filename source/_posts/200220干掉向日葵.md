---
title: 干掉向日葵-论流氓软件的流氓程度
date: 2020-02-20 09:59:05
urlname: fuckOrayMalware
tags:
  - macOS
  - Malware
  - 向日葵
categories:
  - Experience
---

我原本以为主力机告别了 Windows 后会迎来相对的平静，

**——但我错了。**

<!--more-->

## 前情提要

由于 TeamViewer 奇葩的商业用识别逻辑，再加上其官网即使挂了木头也奇卡无比，我算是告别了这个曾经得心应手的工具。国内的向日葵很早几年接触过，印象颇深，记得当时它还有个被控端自启动及隐藏右下角图标和主界面的选项——活脱脱半个 Trojan。如今下载来用，Windows 上体验尚可，由于本人除了游戏基本都活跃在 Mac 上，遂安装向日葵的 Mac 端（当时还感慨这工具平台还挺全，*良心！*）。

## 容我先吐个槽——again

OK，这东西有点不对劲。

{% asset_img 1.png %}

看着没问题是吧？我也觉得，可为什么我按`⌘Q`怎么也关不掉呢？咱都知道 macOS 下你点左上角那个 x 只是相当于隐藏了界面，真的要退出只能`⌘Q`，这位倒好，热键直接不认。要想关，只能走屏幕左上角菜单。

顺便设置为啥是`⌘S`？macOS 通用的`⌘,`不香吗？还好，这个东西按下去它倒是认，自己定的就给用对吧？原来如此（bu

哦对了，这东西还不认`⌘H`，因为丫绑定了个“账号绑定”的对话框上去。**吃炸了胃了撑着的产品经理。一万年用一次的功能绑个通用热键上去。**

这位爷说了，人家不认就算了呗，你揪着不放干嘛？技术力有限没做好支持不是很正常吗？

行，行，那就算他技术力有限，可下面那个**隐藏其他**又是什么鬼？这个热键还真的能用！效果是把你桌面上所有东西都隐藏就留他个向日葵！

自己不能藏，只能藏别人！可以，可以。

~~进入远控以后你最好不要切窗口，如果你点 Dock 栏里的菊花图标就会神奇的发现——它不仅给你恢复原本的远控窗口，还给你在上面又盖了个主界面，你还得手动关了。~~——这个不提，咱还是要大气一点，大行不顾细谨，对吧？呵呵。

## 正题

上面的都忍了，能用就行了，可有一点忍不了了！

你给我开机自启动是什么鬼？？要知道每次开机都给你弹出来个又不需要又不能一键隐藏的东西简直不能再恶心好吗。

OK 咱看看设置，习惯性的`⌘,`，没反应？噢，是`⌘s`，我都懒得大写了。

{% asset_img 2.png %}
{% asset_img 3.png %}
{% asset_img 4.png %}

？？？开机自启动的设置在哪里？啥你没给？

行，我自力更生，好吧？

* Dock 栏里右键选项-登录时打开：没勾上。
*  系统偏好设置-用户与群组-登录项：没有。

甚至翻了安全性与隐私也没找到什么蛛丝马迹，藏哪了？

祭出万能的 DuckDuckgo，简书大佬找到了，参考 [地址](https://www.jianshu.com/p/a20efbcc61dd)。

于是乎，执行命令：

```bash
cd /Library/LaunchAgents
sudo emacs com.oray.sunlogin.agent.plist
sudo emacs com.oray.sunlogin.startup.plist

cd /Library/LaunchDaemons
sudo emacs com.oray.sunlogin.helper.plist
sudo emacs com.oray.sunlogin.plist
```

四个文件都一样，把这段里的`false`改称`true`，世界清静了！
```xml
    <key>Disabled</key>
    <false/>
 ```

## 总结

知乎体：sunlogin 的 macOS 版本作了哪些恶？

* 霸占通用热键为自己的
* 删除全天下通用的隐藏窗口
* 没有遵循系统约定制定自启动配置强行自启动
* 接上条，并且不提供用户更改对应配置接口

这操作我觉得有点眼熟……但有一说一，十五年前的雅虎助手好歹没有封死第三四条。
